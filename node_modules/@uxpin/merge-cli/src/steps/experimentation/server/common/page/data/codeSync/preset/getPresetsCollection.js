"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPresetsCollection = void 0;
const lodash_1 = require("lodash");
const getComponentId_1 = require("../component/getComponentId");
const getComponentRevisionId_1 = require("../component/getComponentRevisionId");
const getDesignSystemId_1 = require("../getDesignSystemId");
const getPresetId_1 = require("./getPresetId");
function getPresetsCollection({ metadata, revisionId }) {
    const designSystemId = getDesignSystemId_1.getDesignSystemId(revisionId);
    const presets = lodash_1.flatMap(metadata.categorizedComponents, (category) => {
        return lodash_1.flatMap(category.components, (component) => {
            const componentId = getComponentId_1.getComponentId(designSystemId, component.info);
            return component.presets.map((preset, index) => {
                return Object.assign(Object.assign({}, preset), { componentRevisionId: getComponentRevisionId_1.getComponentRevisionId(revisionId, componentId), presetId: getPresetId_1.getPresetId(designSystemId, component.info.presets[index].path), sortIndex: index });
            });
        });
    });
    return presets.reduce((all, preset) => {
        all[preset.presetId] = preset;
        return all;
    }, {});
}
exports.getPresetsCollection = getPresetsCollection;
//# sourceMappingURL=getPresetsCollection.js.map