"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateWrappers = void 0;
const getWarnedResult_1 = require("../../../common/warning/getWarnedResult");
const builtInWrapperValidator_1 = require("./wrappers/builtInWrapperValidator");
const customWrapperPathValidator_1 = require("./wrappers/customWrapperPathValidator");
const VALIDATORS = [
    builtInWrapperValidator_1.builtInWrapperValidator,
    customWrapperPathValidator_1.customWrapperPathValidator,
];
function validateWrappers(wrappers, implInfo) {
    const warnedWrappers = wrappers.map((wrapper) => getWarnedResult_1.getWarnedResult(wrapper));
    const result = VALIDATORS
        .reduce((validated, validator) => validator(validated, implInfo), warnedWrappers);
    return getValidWrappersWithWarnings(result);
}
exports.validateWrappers = validateWrappers;
function getValidWrappersWithWarnings(wrappers) {
    const validWrappers = [];
    const warnings = [];
    wrappers.forEach((warnedWrapper) => {
        if (warnedWrapper.warnings.length === 0) {
            validWrappers.push(warnedWrapper.result);
            return;
        }
        warnings.push(...warnedWrapper.warnings);
    });
    return getWarnedResult_1.getWarnedResult(validWrappers, warnings);
}
//# sourceMappingURL=validateWrappers.js.map