"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.customWrapperPathValidator = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
const getWarnedResult_1 = require("../../../../common/warning/getWarnedResult");
const ComponentWrapper_1 = require("../../component/wrappers/ComponentWrapper");
function customWrapperPathValidator(wrappers, implInfo) {
    return wrappers.map(({ result: wrapper, warnings }) => {
        if (wrapper.type === ComponentWrapper_1.ComponentWrapperType.CUSTOM && !wrapperPathExists(implInfo.path, wrapper.path)) {
            warnings.push({ message: `Invalid wrapper path "${wrapper.path}"!` });
        }
        return getWarnedResult_1.getWarnedResult(wrapper, warnings);
    });
}
exports.customWrapperPathValidator = customWrapperPathValidator;
function wrapperPathExists(baseFilePath, pathToResolve) {
    const { dir } = path_1.parse(baseFilePath);
    const path = path_1.resolve(dir, pathToResolve);
    try {
        fs_1.statSync(path);
        return true;
    }
    catch (e) {
        return false;
    }
}
//# sourceMappingURL=customWrapperPathValidator.js.map