"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getRepositoryAdapter = void 0;
const tslib_1 = require("tslib");
const GitRepositoryAdapter_1 = require("./git/GitRepositoryAdapter");
const isGitRepository_1 = require("./git/util/isGitRepository");
function getRepositoryAdapter(cwd, buildOptions) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const options = { path: cwd };
        // Use branch for override if provided
        if (buildOptions && buildOptions.branch) {
            options.branchOverride = buildOptions.branch;
        }
        // Check and use Git repository
        if (yield isGitRepository_1.isGitRepository(cwd)) {
            return new GitRepositoryAdapter_1.GitRepositoryAdapter(options);
        }
        throw new Error('Could not determine version control system for your repository!');
    });
}
exports.getRepositoryAdapter = getRepositoryAdapter;
//# sourceMappingURL=getRepositoryAdapter.js.map