"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSourceFileContentToBundle = void 0;
const lodash_1 = require("lodash");
const path_1 = require("path");
const getUniqPresetImportName_1 = require("./getUniqPresetImportName");
function getSourceFileContentToBundle(tempDirPath, components) {
    return getFileBody(tempDirPath, flattenComponentPresetInfos(components));
}
exports.getSourceFileContentToBundle = getSourceFileContentToBundle;
function getFileBody(tempDirPath, infos) {
    const imports = infos.map(thunkGetImport(tempDirPath)).join('\n');
    const exports = infos.map(getExport).join('\n');
    return `${imports}

export {
${exports}
};
`;
}
function thunkGetImport(tempDirPath) {
    return ({ path }) => (`import ${getUniqPresetImportName_1.getUniqPresetImportName(path)} from '${path_1.relative(tempDirPath, path)}';`);
}
function getExport({ path }) {
    return `  ${getUniqPresetImportName_1.getUniqPresetImportName(path)},`;
}
function flattenComponentPresetInfos(components) {
    return lodash_1.flatMap(components, ({ info }) => (info.presets || []));
}
//# sourceMappingURL=getSourceFileContentToBundle.js.map