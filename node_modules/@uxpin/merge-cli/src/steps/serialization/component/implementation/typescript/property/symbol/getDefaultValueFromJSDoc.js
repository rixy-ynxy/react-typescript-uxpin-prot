"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDefaultValueFromJSDoc = void 0;
const JSDOC_TAG_NAME = 'default';
function getDefaultValueFromJSDoc(propertySymbol) {
    let defaultTagValue = getDefaultTagValue(propertySymbol.getJsDocTags());
    if (!defaultTagValue) {
        return {};
    }
    defaultTagValue = replaceNonJSONQuotes(defaultTagValue);
    const defaultValue = parseDefaultTagValue(defaultTagValue);
    if (typeof defaultValue === 'undefined') {
        return {};
    }
    return { defaultValue: { value: defaultValue } };
}
exports.getDefaultValueFromJSDoc = getDefaultValueFromJSDoc;
function getDefaultTagValue(tags) {
    const defaultTag = tags.find((t) => t.name === JSDOC_TAG_NAME);
    if (defaultTag) {
        return defaultTag.text;
    }
}
function parseDefaultTagValue(defaultTagValue) {
    try {
        return JSON.parse(defaultTagValue);
    }
    catch (_a) {
        return;
    }
}
function replaceNonJSONQuotes(defaultValue) {
    const QUOTES_REGEX = /^['`](.*)['`]$/gm;
    return defaultValue.replace(QUOTES_REGEX, `"$1"`);
}
//# sourceMappingURL=getDefaultValueFromJSDoc.js.map