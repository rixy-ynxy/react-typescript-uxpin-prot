"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isFunctionalComponentWithReactForwardRef = void 0;
const ts = require("typescript");
function extractExpression(node) {
    var _a, _b;
    if (ts.isCallExpression(node)) {
        return node.expression;
    }
    // export default React.forwardRef(() => {});
    if (ts.isExportAssignment(node)) {
        return (ts.isCallExpression(node.expression) ? node.expression.expression : node.expression);
    }
    // const Component:any = React.forwardRef<HTMLElement, Props>(() => {})
    if (ts.isVariableStatement(node)
        && ts.isCallExpression((_b = (_a = node.declarationList) === null || _a === void 0 ? void 0 : _a.declarations[0]) === null || _b === void 0 ? void 0 : _b.initializer)) {
        return extractExpression(node.declarationList.declarations[0].initializer);
    }
    // node is variable declaration from declarationList from variable statement
    // used in getPropsTypeOfFunctionalComponent for extract props
    if (ts.isVariableDeclaration(node) && ts.isCallExpression(node.initializer)) {
        return extractExpression(node.initializer);
    }
}
function isFunctionalComponentWithReactForwardRef(node) {
    var _a, _b, _c, _d, _e;
    const expression = extractExpression(node);
    if (!expression) {
        return false;
    }
    /**
     *  import * as React from 'react'
     *  React.forwardRef(() => {})
     */
    if (ts.isPropertyAccessExpression(expression)) {
        return ((_b = (_a = expression) === null || _a === void 0 ? void 0 : _a.expression) === null || _b === void 0 ? void 0 : _b.escapedText) === 'React'
            && ((_d = (_c = expression) === null || _c === void 0 ? void 0 : _c.name) === null || _d === void 0 ? void 0 : _d.escapedText) === 'forwardRef';
    }
    /**
     *  import { forwardRef } from 'react'
     *  forwardRef(() => {})
     */
    if (ts.isIdentifier(expression)) {
        return ((_e = expression) === null || _e === void 0 ? void 0 : _e.escapedText) === 'forwardRef';
    }
    return false;
}
exports.isFunctionalComponentWithReactForwardRef = isFunctionalComponentWithReactForwardRef;
//# sourceMappingURL=isFunctionalComponentWithReactForwardRef.js.map