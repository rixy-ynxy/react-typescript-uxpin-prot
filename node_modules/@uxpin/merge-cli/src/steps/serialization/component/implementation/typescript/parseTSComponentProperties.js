"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseTSComponentProperties = void 0;
const getWarnedResult_1 = require("../../../../../common/warning/getWarnedResult");
const getComponentPropertiesDefinition_1 = require("./component/getComponentPropertiesDefinition");
const getPropsTypeAndDefaultProps_1 = require("./component/getPropsTypeAndDefaultProps");
const getPropertiesFromType_1 = require("./property/type/getPropertiesFromType");
function parseTSComponentProperties(context, componentDeclaration) {
    const { propsTypeNode, defaultProps } = getPropsTypeAndDefaultProps_1.getPropsTypeAndDefaultProps(context, componentDeclaration);
    if (!propsTypeNode) {
        throw new Error('No component properties found');
    }
    const typeFromTypeNode = context.checker.getTypeFromTypeNode(propsTypeNode);
    const props = getPropertiesFromType_1.getPropertiesFromType(typeFromTypeNode);
    return [
        ...getComponentPropertiesDefinition_1.getComponentPropertiesDefinition(context, props.baseProps, defaultProps),
        ...getComponentExclusivePropertiesDefinition(context, props.exclusiveProps, defaultProps),
    ];
}
exports.parseTSComponentProperties = parseTSComponentProperties;
function getComponentExclusivePropertiesDefinition(context, props, defaultProps) {
    return getComponentPropertiesDefinition_1.getComponentPropertiesDefinition(context, props, defaultProps)
        .map(({ result, warnings }) => {
        const property = Object.assign(Object.assign({}, result), { isRequired: false });
        return getWarnedResult_1.getWarnedResult(property, warnings);
    });
}
//# sourceMappingURL=parseTSComponentProperties.js.map