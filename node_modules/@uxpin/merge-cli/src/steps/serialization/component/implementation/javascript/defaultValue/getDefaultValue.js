"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDefaultValue = void 0;
const parseValue_1 = require("./parseValue");
function getDefaultValue(propName, propItem) {
    const result = {};
    const warnings = [];
    return new Promise((resolve) => {
        if (propItem.defaultValue) {
            parseValue_1.parseValue(propItem.defaultValue.value)
                .then((value) => {
                result.defaultValue = { value };
            })
                .catch((originalError) => {
                warnings.push({
                    message: `Cannot compute default value for property \`${propName}\`

${getFirstLine(originalError.stack || '')}

`,
                });
            })
                .then(() => resolve({ result, warnings }));
        }
        else {
            resolve({ result, warnings });
        }
    });
}
exports.getDefaultValue = getDefaultValue;
function getFirstLine(text) {
    return text.split('\n')[0];
}
//# sourceMappingURL=getDefaultValue.js.map