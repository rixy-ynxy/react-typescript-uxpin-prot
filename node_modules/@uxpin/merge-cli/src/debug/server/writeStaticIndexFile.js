"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeStaticIndexFile = void 0;
const tslib_1 = require("tslib");
const path_1 = require("path");
const writeToFile_1 = require("../../utils/fs/writeToFile");
function writeStaticIndexFile(root, bundlePath, components) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const indexPath = path_1.join(root, 'index.html');
        const relativeBundlePath = path_1.relative(root, bundlePath);
        const fileContent = getIndexFileContent(relativeBundlePath, { components }, 'Design System styleguide');
        yield writeToFile_1.writeToFile(indexPath, fileContent);
        return indexPath;
    });
}
exports.writeStaticIndexFile = writeStaticIndexFile;
function getIndexFileContent(bundlePath, preloadedState, title = '') {
    return `<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>${title}</title>
  </head>
  <body style="font-family: sans-serif">
    <div id="root"></div>
    <script>
      window.__PRELOADED_STATE__ = ${JSON.stringify(preloadedState).replace(/</g, '\\u003c')}
    </script>
    <script src="${bundlePath}"></script>
  </body>
</html>`;
}
//# sourceMappingURL=writeStaticIndexFile.js.map