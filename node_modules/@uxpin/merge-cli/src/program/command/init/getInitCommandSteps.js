"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getInitCommandSteps = void 0;
const fs_extra_1 = require("fs-extra");
const path_1 = require("path");
const printLine_1 = require("../../../utils/console/printLine");
const PrintOptions_1 = require("../../../utils/console/PrintOptions");
const getProjectRoot_1 = require("../../args/providers/paths/getProjectRoot");
const RESOURCES_PATH = '../../../resources';
const DEFAULT_CONFIG_FILES = [
    { source: 'uxpin.config.js', target: 'uxpin.config.js' },
    { source: 'uxpin.webpack.config.js', target: 'uxpin.webpack.config.js' },
    { source: 'UXPinWrapper.js', target: 'src/components/UXPinWrapper/UXPinWrapper.js' },
];
const EXAMPLE_COMPONENT = {
    source: 'Button',
    target: 'src/components/Button',
};
function getInitCommandSteps(args) {
    return [
        { exec: copyDefaultFiles(args), shouldRun: true },
    ];
}
exports.getInitCommandSteps = getInitCommandSteps;
function copyDefaultFiles(args) {
    const projectRoot = getProjectRoot_1.getProjectRoot(args);
    try {
        // config files
        DEFAULT_CONFIG_FILES.forEach((file) => {
            const filePath = `${projectRoot}/${file.target}`;
            if (!fs_extra_1.existsSync(filePath)) {
                fs_extra_1.copySync(path_1.resolve(__dirname, `${RESOURCES_PATH}/${file.source}`), filePath);
                printLine_1.printLine(`âœ… Successfully created ${filePath}`, { color: PrintOptions_1.PrintColor.GREEN });
            }
        });
        // default component
        const componentPath = `${projectRoot}/${EXAMPLE_COMPONENT.target}`;
        if (!fs_extra_1.existsSync(componentPath)) {
            fs_extra_1.copySync(path_1.resolve(__dirname, `${RESOURCES_PATH}/${EXAMPLE_COMPONENT.source}`), componentPath);
            printLine_1.printLine(`âœ… Successfully created example component in ${componentPath}`, { color: PrintOptions_1.PrintColor.GREEN });
        }
    }
    catch (error) {
        printLine_1.printLine('ðŸ›‘ There was an error while copying default config files. Please try again.', { color: PrintOptions_1.PrintColor.RED });
        throw new Error(error.message);
    }
}
//# sourceMappingURL=getInitCommandSteps.js.map