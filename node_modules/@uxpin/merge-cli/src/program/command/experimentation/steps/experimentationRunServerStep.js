"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.experimentationRunServerStep = void 0;
const tslib_1 = require("tslib");
const startExperimentationServer_1 = require("../../../../steps/experimentation/server/startExperimentationServer");
const getExperimentServerOptions_1 = require("./common/getExperimentServerOptions");
function experimentationRunServerStep(args, store) {
    return { exec: thunkStartExperimentationServer(args, store), shouldRun: true };
}
exports.experimentationRunServerStep = experimentationRunServerStep;
function thunkStartExperimentationServer(args, store) {
    return (ds) => tslib_1.__awaiter(this, void 0, void 0, function* () {
        if (!args.disableTunneling && !store.state.ngrokUrl) {
            return ds;
        }
        startExperimentationServer_1.startExperimentationServer(yield getExperimentServerOptions_1.getExperimentServerOptions(args, store.state));
        return ds;
    });
}
//# sourceMappingURL=experimentationRunServerStep.js.map