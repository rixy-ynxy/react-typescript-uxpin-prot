"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerCommandSteps = void 0;
const startDebugServer_1 = require("../../../debug/server/startDebugServer");
const getAllComponentsFromCategories_1 = require("../../../steps/serialization/component/categories/getAllComponentsFromCategories");
const getTempDirPath_1 = require("../../args/providers/paths/getTempDirPath");
const thunkBuildComponentsLibrary_1 = require("../../utils/thunkBuildComponentsLibrary");
const getBuildOptions_1 = require("../push/getBuildOptions");
function getServerCommandSteps(args) {
    const buildOptions = getBuildOptions_1.getBuildOptions(args);
    return [
        { exec: thunkBuildComponentsLibrary_1.thunkBuildComponentsLibrary(buildOptions), shouldRun: true },
        { exec: thunkStartServer(args), shouldRun: true },
    ];
}
exports.getServerCommandSteps = getServerCommandSteps;
function thunkStartServer(args) {
    return ({ result: { categorizedComponents } }) => {
        const { port } = args;
        return startDebugServer_1.startDebugServer(getAllComponentsFromCategories_1.getAllComponentsFromCategories(categorizedComponents), {
            port,
            root: getTempDirPath_1.getTempDirPath(args),
        });
    };
}
//# sourceMappingURL=getServerCommandSteps.js.map